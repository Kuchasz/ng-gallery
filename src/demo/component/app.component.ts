import {ChangeDetectionStrategy, Component, OnInit} from '@angular/core';
import {GalleryService} from '../../index';
import {parseString} from "xml2js";

const wallpapers = ["http://pyszstudio.pl/media/images/blog/2017-08-27/targanice-andrychow-fotografia-plener-slubna-wesele-0.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-27/targanice-andrychow-fotografia-plener-slubna-wesele-1.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-27/targanice-andrychow-fotografia-plener-slubna-wesele-2.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-27/targanice-andrychow-fotografia-plener-slubna-wesele-3.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-27/targanice-andrychow-fotografia-plener-slubna-wesele-4.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-27/targanice-andrychow-fotografia-plener-slubna-wesele-5.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-27/targanice-andrychow-fotografia-plener-slubna-wesele-6.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-27/targanice-andrychow-fotografia-plener-slubna-wesele-7.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-27/targanice-andrychow-fotografia-plener-slubna-wesele-8.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-27/targanice-andrychow-fotografia-plener-slubna-wesele-9.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-27/targanice-andrychow-fotografia-plener-slubna-wesele-10.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-27/targanice-andrychow-fotografia-plener-slubna-wesele-11.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-27/targanice-andrychow-fotografia-plener-slubna-wesele-12.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-27/targanice-andrychow-fotografia-plener-slubna-wesele-13.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-27/targanice-andrychow-fotografia-plener-slubna-wesele-14.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-27/targanice-andrychow-fotografia-plener-slubna-wesele-15.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-27/targanice-andrychow-fotografia-plener-slubna-wesele-16.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-27/targanice-andrychow-fotografia-plener-slubna-wesele-17.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-27/targanice-andrychow-fotografia-plener-slubna-wesele-18.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-27/targanice-andrychow-fotografia-plener-slubna-wesele-19.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-27/targanice-andrychow-fotografia-plener-slubna-wesele-20.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-27/targanice-andrychow-fotografia-plener-slubna-wesele-21.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-27/targanice-andrychow-fotografia-plener-slubna-wesele-22.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-27/targanice-andrychow-fotografia-plener-slubna-wesele-23.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-27/targanice-andrychow-fotografia-plener-slubna-wesele-24.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-27/targanice-andrychow-fotografia-plener-slubna-wesele-25.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-27/targanice-andrychow-fotografia-plener-slubna-wesele-26.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-03/wadowice-andrychow-fotografia-plener-slubna-wesele-0.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-03/wadowice-andrychow-fotografia-plener-slubna-wesele-1.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-03/wadowice-andrychow-fotografia-plener-slubna-wesele-2.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-03/wadowice-andrychow-fotografia-plener-slubna-wesele-3.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-03/wadowice-andrychow-fotografia-plener-slubna-wesele-4.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-03/wadowice-andrychow-fotografia-plener-slubna-wesele-5.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-03/wadowice-andrychow-fotografia-plener-slubna-wesele-6.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-03/wadowice-andrychow-fotografia-plener-slubna-wesele-7.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-03/wadowice-andrychow-fotografia-plener-slubna-wesele-8.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-03/wadowice-andrychow-fotografia-plener-slubna-wesele-9.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-03/wadowice-andrychow-fotografia-plener-slubna-wesele-10.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-03/wadowice-andrychow-fotografia-plener-slubna-wesele-11.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-03/wadowice-andrychow-fotografia-plener-slubna-wesele-12.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-03/wadowice-andrychow-fotografia-plener-slubna-wesele-13.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-03/wadowice-andrychow-fotografia-plener-slubna-wesele-14.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-03/wadowice-andrychow-fotografia-plener-slubna-wesele-15.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-03/wadowice-andrychow-fotografia-plener-slubna-wesele-16.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-03/wadowice-andrychow-fotografia-plener-slubna-wesele-17.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-03/wadowice-andrychow-fotografia-plener-slubna-wesele-18.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-03/wadowice-andrychow-fotografia-plener-slubna-wesele-19.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-03/wadowice-andrychow-fotografia-plener-slubna-wesele-20.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-03/wadowice-andrychow-fotografia-plener-slubna-wesele-21.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-03/wadowice-andrychow-fotografia-plener-slubna-wesele-22.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-03/wadowice-andrychow-fotografia-plener-slubna-wesele-23.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-03/wadowice-andrychow-fotografia-plener-slubna-wesele-24.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-03/wadowice-andrychow-fotografia-plener-slubna-wesele-25.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-03/wadowice-andrychow-fotografia-plener-slubna-wesele-26.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-0.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-1.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-2.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-3.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-4.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-5.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-6.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-7.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-8.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-9.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-10.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-11.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-12.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-13.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-14.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-15.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-16.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-17.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-18.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-19.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-20.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-21.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-22.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-23.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-24.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-25.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-26.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-27.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-28.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-29.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-30.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-31.jpg", "http://pyszstudio.pl/media/images/blog/2017-09-17/kalwaria-fotografia-slubna-32.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-0.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-1.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-2.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-3.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-4.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-5.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-6.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-7.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-8.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-9.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-10.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-11.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-12.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-13.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-14.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-15.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-16.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-17.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-18.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-19.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-20.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-21.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-22.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-23.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-24.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-25.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-26.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-27.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-28.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-29.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-30.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-31.jpg", "http://pyszstudio.pl/media/images/blog/2017-08-14/targanice-andrychow-fotografia-plener-slubna-wesele-32.jpg"];

@Component({
    selector: 'app-root',
    templateUrl: './app.component.html',
    styleUrls: ['./app.component.scss'],
    changeDetection: ChangeDetectionStrategy.OnPush
})
export class AppComponent implements OnInit {

    constructor(public gallery: GalleryService) {
    }

    ngOnInit() {
        this.gallery.load([
            {
                name: 'Blog images',
                rootDir: '/blog',
                images: wallpapers.map(src => ({src}))
            }
        ]);

        fetch('/folders.xml')
            .then(response => response.text())
            .then(foldersXmlString => parseString(foldersXmlString, (_, folders) => {
                folders.item.item.forEach(item => {
                    fetch(`/${item.$.variables}`)
                        .then(response => response.text())
                        .then(photosXmlString => parseString(photosXmlString, (_, photos) => {
                            console.log(photos);
                        }))
                });
            }));
    }

}
